$perSecond(first_variable, second_variable, third_variable) FROM table_name
SELECT t, if(runningDifference(max_0) < 0, nan, runningDifference(max_0) / runningDifference(t/1000)) AS max_0_PerSecond, if(runningDifference(max_1) < 0, nan, runningDifference(max_1) / runningDifference(t/1000)) AS max_1_PerSecond, if(runningDifference(max_2) < 0, nan, runningDifference(max_2) / runningDifference(t/1000)) AS max_2_PerSecond FROM ( SELECT (intDiv(toUInt32(undefined), 30) * 30) * 1000 AS t, max(first_variable) AS max_0, max(second_variable) AS max_1, max(third_variable) AS max_2 FROM table_name WHERE